Quick Start
============

Installation
-------------
.. code-block:: python
    
    pip install baserowapi

Basic Operation
---------------

.. code-block:: python

    from baserowapi import Baserow, Filter

    # baserow client
    baserow = Baserow(url='https://api.baserow.io',token='mytoken')
    
    # create table instance
    table_id = 1234567
    table = baserow.get_table(table_id)
    
    # table properties
    print(table.id)
    print(table.primary_field)

    # table fields (columns)
    print(table.fields)
    print(table.fields['Name']) 
    print(table.fields['Name'].order)
    print(table.fields['Name'].field_data)

    # get list of field names
    print(table.field_names)

    # get row by id
    my_row = table.get_row(1)

    # dictionary of field names and values
    print(my_row.content)

    # access value for specific field
    print(my_row['Name'])

    # get all rows as RowIterator object
    all_my_rows = table.get_rows()
    for row in all_my_rows:
        print(row)

    # get rows as list object
    all_my_rows_as_list = list(table.get_rows())

    # create filter object, implied 'equal'
    name_equal_grace = Filter("Name", "Grace")

    # create filter object, contains_not operator
    name_contains_not_A = Filter("Name", "A", 'contains_not')

    # get rows with filter
    rows_with_name_grace = table.get_rows(filters=[name_equal_grace])
    for row in rows_with_name_grace:
        print(row.content)

    # get rows with multiple filters on same field, OR
    rows_with_name_ada_or_grace = table.get_rows(filters=[Filter("Name", "Ada"), Filter("Name", "Grace")], filter_type='OR')
    for row in rows_with_name_ada_or_grace:
        print(row.content)

    # get rows sorted ascending by field
    rows_name_ascending = table.get_rows(order_by=["Name"])
    for row in rows_name_ascending:
        print(row.content)

    # get rows sorted descending by field
    rows = table.get_rows(order_by=["-Name"])
    for row in rows:
        print(row.content)

    # get rows with search
    rows_with_test = table.get_rows(search="test")
    for row in rows_with_test:
        print(row.content)

    # get rows from view
    rows_from_view = table.get_rows(view_id=12345678)
    for row in rows_from_view:
        print(row.content)

    # get rows specify included fields
    rows_with_include = table.get_rows(include=['Name','Last name', 'Notes', 'Active'])
    for row in rows_with_include:
        print(row.content)
    
    # get rows exclude some fields
    rows_with_exclude = table.get_rows(exclude=['Notes','Active'])
    for row in rows_with_exclude:
        print(row.content)

    # add new row from dictionary
    new_row_data = {
        'Name': 'Ringo',
        'Last name': 'Staar',
        'Notes': 'drums',
        'Active': True
    }
    added_row = table.add_row(new_row_data)
    print(added_row.content)

    # delete single row
    deleted_status = added_row.delete()
    print(deleted_status)

    # add multiple rows from list of dictionaries
    # uses 'batch' api endpoint
    add_multiple_row_data = [
        {
            'Name': 'Nick',
            'Last name': 'Saban',
            'Notes': 'Head coach of Alabama Crimson Tide',
            'Active': True
        },
        {
            'Name': 'Dabo',
            'Last name': 'Swinney',
            'Notes': 'Head coach of Clemson Tigers',
            'Active': True
        },
        {
            'Name': 'Urban',
            'Last name': 'Meyer',
            'Notes': 'Former head coach of Ohio State Buckeyes',
            'Active': False
        }
    ]

    added_rows = table.add_row(add_multiple_row_data)
    for row in added_rows:
        print(row.content)
    
    # delete multiple rows
    # uses batch delete api endpoint
    deleted_status = table.delete_rows(added_rows)
    print(deleted_status)

    # delete multiple rows using list of ids
    re_added_rows = table.add_row(add_multiple_row_data)
    rows_to_delete = []
    for row in re_added_rows:
        rows_to_delete.append(row.id)
    delete_status = table.delete_rows(rows_to_delete)

    # update multiple rows from dictionary
    # uses batch update api endpoint
    update_rows_data = [
        {"id": 3, "Notes": "dict update test"},
        {"id": 4, "Notes": "dict update test"},
        {"id": 5, "Notes": "dict update test"}
    ]
    updated_rows = table.update_rows(update_rows_data)
    for row in updated_rows:
        print(row.content)

    # update multiple rows from Row objects
    my_rows = list(table.get_rows(filters=[Filter("Notes", "dict update test")]))
    for row in my_rows:
        row.update(values={'Notes': 'Row object update test'}, memory_only=True)
        print(row.content)
    updated_rows = table.update_rows(my_rows)
    for row in updated_rows:
        print(row.content)

    # return first row from results as Row object 
    single_row = table.get_rows(return_single=True)
    print(single_row.content)

    # change value for in-memory Row object
    single_row['Notes'] = "Changed note in memory"
    print(single_row['Notes'])

    # save Row with current row values to server
    updated_row = single_row.update()
    print(updated_row.content)

    # update Row with dictionary
    # saves row to server
    updated_row = single_row.update({'Notes': 'Updated row via dictionary'})

    # move row before row 4
    myRow.move_row(before_id=4)

    # move row to the end
    myRow.move_row()

